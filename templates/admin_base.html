<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Panel Administratora{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin_base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">

    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <script type="text/javascript">
    // Funkcja inicjalizująca Google Translate Widget
    function googleTranslateElementInit() {
        new google.translate.TranslateElement(
            {
                pageLanguage: 'pl', // Domyślny język strony
                includedLanguages: 'pl,en,de,fr,es,ru', // Obsługiwane języki
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE
            },
            'google_translate_element' // ID kontenera, w którym ma być osadzony widget
        );
    }

    // Obsługa wyboru języka z własnego dropdown
    document.addEventListener("DOMContentLoaded", function () {
        const languageSelector = document.getElementById("language_selector");

        if (languageSelector) {
            languageSelector.addEventListener("change", function () {
                const lang = this.value; // Pobierz wybrany język
                const translateDropdown = document.querySelector("#google_translate_element select");

                if (translateDropdown) {
                    translateDropdown.value = lang; // Ustaw wartość w dropdownie Google Translate
                    translateDropdown.dispatchEvent(new Event("change")); // Wywołaj zmianę języka
                } else {
                    console.error("Google Translate widget not found!");
                }
            });
        } else {
            console.error("Language selector element not found!");
        }
    });


    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <button class="toggle-sidebar" onclick="toggleSidebar()">&#9776;</button>
            <div class="uls">
                <h2>Panel Administratora</h2><hr>

                <div class="only-worker-ul">
                    <div id="google_translate_element" class="google-translate-element"></div>
                    <ul>
                        <li class="sidebar-item"><a href="{{ url_for('waiter_view') }}">Widok Kelnera</a></li>
                        <li class="sidebar-item"><a href="{{ url_for('kitchen_view') }}">Widok Kuchni</a></li>
                        <li class="sidebar-item"><a href="http://ordering-deploy.onrender.com/menu/1">Zamawianie</a></li>
                    </ul>
                </div>
                <hr>
                <div class="admin-ul">
                    <ul>
                        <li class="sidebar-item"><a href="{{ url_for('admin_panel') }}">Zarządzaj aktualnym menu</a></li>
                        <li class="sidebar-item"><a href="{{ url_for('add_tables') }}">Zarządzaj stolikami</a></li>
                        <li class="sidebar-item"><a href="{{ url_for('add_events') }}">Zarządzaj wydarzeniami</a></li>
                        <li class="sidebar-item"><a href="{{ url_for('admin_add_popup') }}">Zarządzaj Pop-upem</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Main Content Area -->
        <div class="main-content">
            {% block content %}{% endblock %}
        </div>
    </div>

</body>
<script>
    function toggleSidebar() {
        const sidebar = document.querySelector('.sidebar');
        sidebar.classList.toggle('collapsed');
    }


    document.addEventListener('DOMContentLoaded', () => {
        const sidebarItems = document.querySelectorAll('.sidebar-item a');

        sidebarItems.forEach(item => {
            if (item.href === window.location.href) {
                item.parentElement.classList.add('active');
            }
        });
    });
</script>


</html>
